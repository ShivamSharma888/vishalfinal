<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CraveBite Pro | Premium Food Delivery Platform</title>
    
    <script src="https://checkout.razorpay.com/v1/checkout.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">

    <style>
        /* =========================================
           1. CSS VARIABLES & RESET
           ========================================= */
        :root {
            --primary: #ff4757;
            --primary-hover: #e84118;
            --secondary: #2f3542;
            --accent: #ffa502;
            --success: #2ed573;
            --bg-body: #f8f9fa;
            --bg-white: #ffffff;
            --bg-dark: #2f3542;
            --font-main: 'Poppins', sans-serif;
            --radius-md: 15px;
            --radius-lg: 30px;
            --shadow-sm: 0 5px 15px rgba(0,0,0,0.05);
            --shadow-lg: 0 20px 50px rgba(0,0,0,0.15);
            --whatsapp: #25D366;
            --transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; scroll-behavior: smooth; }
        body { font-family: var(--font-main); background-color: var(--bg-body); color: var(--secondary); line-height: 1.6; overflow-x: hidden; }
        a { text-decoration: none; color: inherit; transition: var(--transition); }
        ul { list-style: none; }
        img { max-width: 100%; display: block; }
        button, input, textarea { font-family: var(--font-main); outline: none; }

        /* =========================================
           2. GLOBAL UTILS & ANIMATIONS
           ========================================= */
        .container { max-width: 1300px; margin: 0 auto; padding: 0 20px; }
        .section-padding { padding: 80px 0; }
        .text-center { text-align: center; }
        .text-primary { color: var(--primary); }
        
        /* Reveal Animation */
        .reveal { opacity: 0; transform: translateY(30px); transition: all 0.8s ease-out; }
        .reveal.active { opacity: 1; transform: translateY(0); }

        .btn { display: inline-block; padding: 12px 30px; border-radius: var(--radius-lg); font-weight: 600; font-size: 1rem; cursor: pointer; border: 2px solid transparent; transition: var(--transition); position: relative; overflow: hidden; z-index: 1; }
        .btn-primary { background-color: var(--primary); color: var(--bg-white); box-shadow: 0 5px 15px rgba(255, 71, 87, 0.3); }
        .btn-primary:hover { background-color: var(--primary-hover); transform: translateY(-3px); box-shadow: 0 8px 25px rgba(255, 71, 87, 0.5); }
        .btn-secondary { background-color: var(--bg-white); color: var(--secondary); border-color: #ddd; }
        .btn-secondary:hover { border-color: var(--primary); color: var(--primary); }
        .btn-block { width: 100%; }

        .section-title { margin-bottom: 50px; position: relative; display: inline-block; }
        .section-title h2 { font-size: 2.5rem; font-weight: 700; color: var(--secondary); margin-bottom: 15px; }
        .section-title p { color: #777; font-size: 1.1rem; max-width: 600px; margin: 0 auto; }
        .section-title::after { content: ''; position: absolute; bottom: -10px; left: 50%; transform: translateX(-50%); width: 80px; height: 4px; background: var(--primary); border-radius: 2px; }

        /* =========================================
           3. HEADER & NAVIGATION
           ========================================= */
        header { background: rgba(255, 255, 255, 0.95); backdrop-filter: blur(10px); position: sticky; top: 0; z-index: 1000; box-shadow: var(--shadow-sm); }
        nav { display: flex; justify-content: space-between; align-items: center; height: 80px; }
        .logo { font-size: 1.8rem; font-weight: 800; color: var(--secondary); display: flex; align-items: center; gap: 10px; cursor: pointer; }
        .logo i { color: var(--primary); font-size: 2.2rem; animation: bounce 2s infinite; }
        @keyframes bounce { 0%, 20%, 50%, 80%, 100% {transform: translateY(0);} 40% {transform: translateY(-10px);} 60% {transform: translateY(-5px);} }
        
        .nav-menu { display: flex; gap: 30px; align-items: center; }
        .nav-link { font-weight: 600; color: var(--secondary); font-size: 1rem; position: relative; padding: 5px 0; cursor: pointer; }
        .nav-link::before { content: ''; position: absolute; bottom: 0; left: 0; width: 0; height: 2px; background: var(--primary); transition: var(--transition); }
        .nav-link:hover::before, .nav-link.active::before { width: 100%; }
        .nav-link:hover, .nav-link.active { color: var(--primary); }
        
        .cart-icon-wrapper { position: relative; cursor: pointer; margin-left: 15px; }
        .cart-icon-wrapper i { font-size: 1.4rem; color: var(--secondary); transition: var(--transition); }
        .cart-icon-wrapper:hover i { color: var(--primary); transform: scale(1.1); }
        .cart-count { position: absolute; top: -8px; right: -10px; background: var(--primary); color: white; font-size: 0.75rem; font-weight: bold; width: 20px; height: 20px; display: flex; align-items: center; justify-content: center; border-radius: 50%; animation: pop 0.3s ease; }
        @keyframes pop { 0% {transform: scale(0);} 80% {transform: scale(1.2);} 100% {transform: scale(1);} }
        .hamburger { display: none; font-size: 1.5rem; cursor: pointer; }

        /* =========================================
           4. FLOATING BUTTONS
           ========================================= */
        .floating-actions { position: fixed; bottom: 30px; left: 30px; z-index: 3000; display: flex; flex-direction: column; gap: 15px; }
        .float-btn { width: 60px; height: 60px; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-size: 1.5rem; box-shadow: 0 10px 25px rgba(0,0,0,0.3); transition: transform 0.3s; position: relative; }
        .float-btn:hover { transform: scale(1.1); }
        .float-btn.whatsapp { background: var(--whatsapp); animation: pulse-green 2s infinite; }
        .float-btn.call { background: var(--primary); animation: pulse-red 2s infinite; animation-delay: 1s; }
        
        @keyframes pulse-green { 0% {box-shadow: 0 0 0 0 rgba(37, 211, 102, 0.7);} 70% {box-shadow: 0 0 0 15px rgba(37, 211, 102, 0);} 100% {box-shadow: 0 0 0 0 rgba(37, 211, 102, 0);} }
        @keyframes pulse-red { 0% {box-shadow: 0 0 0 0 rgba(255, 71, 87, 0.7);} 70% {box-shadow: 0 0 0 15px rgba(255, 71, 87, 0);} 100% {box-shadow: 0 0 0 0 rgba(255, 71, 87, 0);} }

        /* =========================================
           5. SECTIONS
           ========================================= */
        .page-section { display: none; animation: fadeIn 0.6s ease-out; }
        .page-section.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

        /* --- HERO --- */
        #home { min-height: 90vh; background: linear-gradient(135deg, #fff 0%, #fff0f1 100%); display: flex; align-items: center; overflow: hidden; }
        #home:not(.active) { display: none; }
        #home.active { display: flex; }
        .hero-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 50px; align-items: center; }
        .hero-text h1 { font-size: 3.5rem; line-height: 1.2; margin-bottom: 20px; color: var(--secondary); }
        .hero-text span { color: var(--primary); position: relative; display: inline-block; }
        .hero-text span::after { content: ''; position: absolute; width: 100%; height: 10px; background: rgba(255, 71, 87, 0.2); bottom: 5px; left: 0; z-index: -1; transform: rotate(-2deg); }
        .search-box { background: white; padding: 10px; border-radius: 50px; box-shadow: var(--shadow-lg); display: flex; max-width: 500px; transition: transform 0.3s; }
        .search-box:focus-within { transform: translateY(-5px); }
        .search-box input { flex: 1; border: none; padding: 0 20px; font-size: 1rem; background: transparent; }
        .hero-img img { width: 100%; animation: float 6s ease-in-out infinite; filter: drop-shadow(0 20px 30px rgba(0,0,0,0.1)); }
        @keyframes float { 0% { transform: translateY(0); } 50% { transform: translateY(-20px); } 100% { transform: translateY(0); } }

        /* --- STEPS --- */
        .steps-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 30px; margin-top: 50px; }
        .step-card { background: white; padding: 40px 20px; border-radius: var(--radius-md); text-align: center; box-shadow: var(--shadow-sm); transition: var(--transition); position: relative; z-index: 1; }
        .step-card:hover { transform: translateY(-10px); box-shadow: var(--shadow-lg); background: #fff; }
        .step-number { position: absolute; top: -20px; left: 50%; transform: translateX(-50%); width: 50px; height: 50px; background: var(--primary); color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; font-size: 1.2rem; border: 4px solid white; box-shadow: 0 5px 15px rgba(255,71,87,0.3); }
        .step-icon { font-size: 3rem; color: var(--accent); margin-bottom: 20px; margin-top: 10px; transition: transform 0.3s; }
        .step-card:hover .step-icon { transform: scale(1.2) rotate(10deg); }

        /* --- RESTAURANTS --- */
        .filters { display: flex; justify-content: center; gap: 15px; margin-bottom: 40px; flex-wrap: wrap; }
        .filter-btn { padding: 8px 25px; border: 1px solid #ddd; border-radius: 25px; background: white; cursor: pointer; transition: var(--transition); font-weight: 500; }
        .filter-btn.active, .filter-btn:hover { background: var(--primary); color: white; border-color: var(--primary); transform: translateY(-2px); box-shadow: 0 5px 15px rgba(255,71,87,0.2); }
        .restaurant-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 30px; }
        .res-card { background: white; border-radius: var(--radius-md); overflow: hidden; box-shadow: var(--shadow-sm); transition: var(--transition); border: 1px solid #eee; }
        .res-card:hover { transform: translateY(-10px); box-shadow: var(--shadow-lg); }
        .res-img { height: 200px; overflow: hidden; position: relative; }
        .res-img img { width: 100%; height: 100%; object-fit: cover; transition: transform 0.5s; }
        .res-card:hover .res-img img { transform: scale(1.1); }
        .badge { position: absolute; top: 15px; right: 15px; background: var(--success); color: white; padding: 4px 10px; border-radius: 4px; font-size: 0.8rem; font-weight: 600; box-shadow: 0 2px 5px rgba(0,0,0,0.2); }
        .res-info { padding: 25px; }
        .res-footer { display: flex; justify-content: space-between; align-items: center; border-top: 1px solid #eee; padding-top: 15px; }

        /* --- PAYMENT --- */
        .payment-container { display: grid; grid-template-columns: 2fr 1fr; gap: 40px; }
        .payment-methods { background: white; padding: 30px; border-radius: var(--radius-md); box-shadow: var(--shadow-sm); }
        .method-card { border: 2px solid #eee; padding: 20px; border-radius: var(--radius-md); margin-bottom: 15px; cursor: pointer; transition: var(--transition); display: flex; align-items: center; gap: 15px; }
        .method-card:hover, .method-card.selected { border-color: var(--primary); background: #fff0f1; transform: translateX(5px); }
        .order-summary { background: white; padding: 30px; border-radius: var(--radius-md); box-shadow: var(--shadow-sm); height: fit-content; border: 1px solid #eee; }
        .summary-total { border-top: 2px dashed #eee; margin-top: 20px; padding-top: 15px; display: flex; justify-content: space-between; font-weight: 700; font-size: 1.2rem; color: var(--secondary); }
        .input-group { margin-bottom: 15px; }
        .input-group label { display: block; margin-bottom: 5px; font-weight: 500; }
        .input-group input { width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 8px; }

        /* --- TRACKING PAGE (ANIMATED MAP) --- */
        .tracking-wrapper { max-width: 800px; margin: 0 auto; background: white; padding: 30px; border-radius: var(--radius-md); box-shadow: var(--shadow-lg); overflow: hidden; }
        
        /* THE MAP CONTAINER */
        .delivery-map {
            width: 100%;
            height: 350px;
            background-color: #e5e5e5;
            background-image: 
                radial-gradient(#d1d1d1 15%, transparent 16%),
                radial-gradient(#d1d1d1 15%, transparent 16%);
            background-size: 20px 20px;
            background-position: 0 0, 10px 10px;
            border-radius: var(--radius-md);
            margin-bottom: 30px;
            position: relative;
            overflow: hidden;
            border: 2px solid #ddd;
        }

        /* Roads */
        .map-road { position: absolute; background: #555; border-radius: 10px; }
        .road-1 { top: 50%; left: 0; width: 30%; height: 40px; transform: translateY(-50%); }
        .road-2 { top: 20%; left: 28%; width: 40px; height: 32%; }
        .road-3 { top: 20%; left: 28%; width: 45%; height: 40px; }
        .road-4 { top: 20%; right: 27%; width: 40px; height: 60%; }
        .road-5 { bottom: 20%; right: 0; width: 30%; height: 40px; }

        .map-road::after {
            content: ''; position: absolute; top: 50%; left: 0; width: 100%; height: 2px;
            background: repeating-linear-gradient(90deg, #fff 0, #fff 10px, transparent 10px, transparent 20px);
            transform: translateY(-50%);
        }
        .road-2::after, .road-4::after {
            width: 2px; height: 100%; top: 0; left: 50%; transform: translateX(-50%);
            background: repeating-linear-gradient(0deg, #fff 0, #fff 10px, transparent 10px, transparent 20px);
        }

        .map-location { position: absolute; z-index: 5; text-align: center; font-weight: bold; color: var(--secondary); text-shadow: 0 2px 5px rgba(255,255,255,0.8); }
        .loc-icon { font-size: 2rem; color: var(--primary); filter: drop-shadow(0 5px 5px rgba(0,0,0,0.3)); animation: bouncePin 1s infinite alternate; }
        @keyframes bouncePin { from {transform: translateY(0);} to {transform: translateY(-10px);} }
        .loc-spu { bottom: 25%; right: 5%; }
        .loc-start { top: 55%; left: 5%; }

        .delivery-boy {
            position: absolute; width: 50px; height: 50px; background: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 1.5rem; color: var(--accent); box-shadow: 0 5px 15px rgba(0,0,0,0.2); z-index: 10; animation: deliveryRoute 12s linear infinite;
        }

        @keyframes deliveryRoute {
            0% { top: 48%; left: 0; transform: rotate(0deg); }
            28% { top: 48%; left: 27%; transform: rotate(0deg); } 
            30% { top: 48%; left: 28%; transform: rotate(-90deg); } 
            35% { top: 20%; left: 28%; transform: rotate(-90deg); } 
            37% { top: 18%; left: 28%; transform: rotate(0deg); } 
            60% { top: 18%; left: 69%; transform: rotate(0deg); } 
            62% { top: 18%; left: 70%; transform: rotate(90deg); } 
            85% { top: 76%; left: 70%; transform: rotate(90deg); } 
            87% { top: 78%; left: 70%; transform: rotate(0deg); } 
            100% { top: 78%; left: 95%; transform: rotate(0deg); } 
        }

        .track-header h3 { font-size: 1.5rem; margin-bottom: 5px; }
        .timeline { margin-top: 30px; position: relative; padding-left: 30px; }
        .timeline-item { position: relative; padding-bottom: 40px; }
        .timeline-item::before { content: ''; position: absolute; left: -34px; top: 0; width: 2px; height: 100%; background: #eee; }
        .timeline-item:last-child::before { display: none; }
        .timeline-icon { position: absolute; left: -45px; top: 0; width: 25px; height: 25px; background: white; border: 3px solid #ddd; border-radius: 50%; z-index: 2; transition: all 0.3s; }
        .timeline-item.active .timeline-icon { background: var(--success); border-color: var(--success); box-shadow: 0 0 0 5px rgba(46, 213, 115, 0.2); }
        .timeline-content h4 { font-size: 1.1rem; margin-bottom: 5px; }
        
        /* --- ABOUT --- */
        .about-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 50px; align-items: center; margin-bottom: 80px; }
        .about-img { border-radius: var(--radius-md); overflow: hidden; box-shadow: var(--shadow-md); transition: transform 0.5s; }
        .about-img:hover { transform: scale(1.02); }
        .feature-box { padding: 20px; background: white; border-radius: 10px; margin-top: 15px; display: flex; gap: 15px; align-items: flex-start; box-shadow: 0 5px 15px rgba(0,0,0,0.05); transition: 0.3s; }
        .feature-box:hover { transform: translateX(10px); border-left: 4px solid var(--primary); }

        /* --- CONTACT SECTION --- */
        .contact-container-custom { display: grid; grid-template-columns: 1fr 1fr; gap: 40px; }
        .contact-info-box { padding: 30px; background: white; border-radius: var(--radius-md); box-shadow: var(--shadow-sm); height: 100%; }
        .contact-form-box { background: white; padding: 30px; border-radius: var(--radius-md); box-shadow: var(--shadow-sm); }

        /* --- AUTH FORMS --- */
        .auth-wrapper { max-width: 450px; margin: 0 auto; background: white; padding: 40px; border-radius: var(--radius-md); box-shadow: var(--shadow-lg); text-align: center; border-top: 5px solid var(--primary); }
        .form-group { margin-bottom: 20px; text-align: left; }
        .form-group input, .form-group textarea { width: 100%; padding: 12px 15px; border: 1px solid #ddd; border-radius: var(--radius-md); transition: border-color 0.3s; }
        .form-group input:focus { border-color: var(--primary); box-shadow: 0 0 0 3px rgba(255,71,87,0.1); }
        .auth-toggle { margin-top: 20px; font-size: 0.9rem; }
        .auth-toggle span { color: var(--primary); cursor: pointer; font-weight: 600; text-decoration: underline; }

        /* --- CART SIDEBAR --- */
        .cart-sidebar { position: fixed; top: 0; right: -400px; width: 350px; height: 100vh; background: white; box-shadow: -5px 0 30px rgba(0,0,0,0.2); z-index: 2500; transition: right 0.4s cubic-bezier(0.77, 0, 0.175, 1); display: flex; flex-direction: column; }
        .cart-sidebar.open { right: 0; }
        .cart-header { padding: 20px; background: var(--secondary); color: white; display: flex; justify-content: space-between; align-items: center; }
        .cart-items { flex: 1; padding: 20px; overflow-y: auto; }
        .cart-item { display: flex; justify-content: space-between; margin-bottom: 20px; border-bottom: 1px solid #eee; padding-bottom: 10px; animation: slideIn 0.3s ease; }
        @keyframes slideIn { from {transform: translateX(20px); opacity:0;} to {transform: translateX(0); opacity:1;} }
        .qty-controls { display: flex; align-items: center; gap: 10px; }
        .qty-btn { width: 25px; height: 25px; background: #eee; border: none; border-radius: 50%; cursor: pointer; font-weight: bold; transition: 0.2s; }
        .qty-btn:hover { background: var(--primary); color: white; }
        .cart-footer { padding: 20px; background: #f9f9f9; border-top: 1px solid #ddd; }

        /* --- FOOTER --- */
        footer { background: var(--bg-dark); color: #d2d6dc; padding-top: 80px; margin-top: 80px; }
        .footer-content { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 40px; padding-bottom: 50px; border-bottom: 1px solid rgba(255,255,255,0.1); }
        .footer-logo { color: white; font-size: 1.5rem; font-weight: 800; margin-bottom: 20px; display: block; }
        .footer-links li { margin-bottom: 12px; }
        .footer-links a:hover { color: var(--primary); padding-left: 5px; }
        .social-icons { display: flex; gap: 15px; margin-top: 20px; }
        .social-icons a { width: 40px; height: 40px; background: rgba(255,255,255,0.1); display: flex; align-items: center; justify-content: center; border-radius: 50%; transition: var(--transition); }
        .social-icons a:hover { background: var(--primary); color: white; transform: translateY(-3px) rotate(360deg); }
        .copyright { text-align: center; padding: 25px 0; font-size: 0.9rem; }

        /* --- MENU MODAL --- */
        .modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.6); z-index: 2000; display: none; justify-content: center; align-items: center; backdrop-filter: blur(5px); opacity: 0; transition: opacity 0.3s ease; }
        .modal-overlay.open { display: flex; opacity: 1; }
        .modal-container { background: white; width: 90%; max-width: 800px; max-height: 90vh; border-radius: var(--radius-md); overflow: hidden; display: flex; flex-direction: column; animation: zoomIn 0.3s ease; }
        @keyframes zoomIn { from {transform: scale(0.9); opacity:0;} to {transform: scale(1); opacity:1;} }
        .modal-header { padding: 20px; background: var(--primary); color: white; display: flex; justify-content: space-between; align-items: center; }
        .modal-close { background: transparent; border: none; color: white; font-size: 1.5rem; cursor: pointer; }
        .modal-body { padding: 20px; overflow-y: auto; background: #f8f9fa; }
        .menu-list { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; }
        .menu-item { background: white; padding: 15px; border-radius: var(--radius-md); display: flex; justify-content: space-between; align-items: center; box-shadow: 0 5px 15px rgba(0,0,0,0.05); transition: 0.3s; }
        .menu-item:hover { transform: translateY(-5px); border-bottom: 3px solid var(--primary); }
        .btn-add { background: white; border: 1px solid var(--primary); color: var(--primary); padding: 5px 15px; border-radius: 20px; cursor: pointer; transition: var(--transition); }
        .btn-add:hover { background: var(--primary); color: white; }

        /* =========================================
           6. RESPONSIVE DESIGN (UPDATED)
           ========================================= */
        @media (max-width: 992px) {
            .hero-grid, .payment-container, .about-grid { grid-template-columns: 1fr; text-align: center; }
            .hero-img { order: -1; }
            .search-box { margin: 0 auto; }
            .feature-box { text-align: left; }
        }
        
        @media (max-width: 768px) {
            .hamburger { display: block; color: var(--secondary); }
            .nav-menu { position: fixed; top: 80px; left: -100%; width: 100%; height: calc(100vh - 80px); background: white; flex-direction: column; justify-content: center; transition: 0.4s ease; box-shadow: inset 0 10px 20px rgba(0,0,0,0.05); }
            .nav-menu.active { left: 0; }
            .hero-text h1 { font-size: 2.5rem; }
            .cart-sidebar { width: 100%; right: -100%; }
            
            /* CONTACT PAGE MOBILE FIX */
            .contact-container-custom { grid-template-columns: 1fr; gap: 20px; }
            .contact-info-box { text-align: center; padding: 20px; }
            .auth-wrapper { padding: 25px; }
            
            /* Map Adjust */
            .delivery-map { height: 250px; }
        }
    </style>
</head>
<body>

    <div class="floating-actions">
        <a href="https://wa.me/919805917916" target="_blank" class="float-btn whatsapp">
            <i class="fab fa-whatsapp"></i>
        </a>
        <a href="tel:9805917916" class="float-btn call">
            <i class="fas fa-phone-alt"></i>
        </a>
    </div>

    <div class="modal-overlay" id="menuModal">
        <div class="modal-container">
            <div class="modal-header">
                <h3 id="modalRestName">Restaurant Name</h3>
                <button class="modal-close" onclick="App.closeMenu()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="menu-list" id="menuListContainer"></div>
            </div>
        </div>
    </div>

    <div class="cart-sidebar" id="cartSidebar">
        <div class="cart-header">
            <h3>Your Cart</h3>
            <button onclick="App.toggleCart()" style="background:none; border:none; color:white; font-size:1.5rem; cursor:pointer">&times;</button>
        </div>
        <div class="cart-items" id="cartItemsContainer">
            <p class="text-center" style="margin-top:50px; color:#999">Your cart is empty.</p>
        </div>
        <div class="cart-footer">
            <div class="cart-total">
                <span>Total:</span>
                <span id="cartTotalAmount">₹0.00</span>
            </div>
            <button class="btn btn-primary btn-block" onclick="Cart.proceedToPayment()">Proceed to Pay</button>
        </div>
    </div>

    <header>
        <div class="container">
            <nav>
                <a href="#" class="logo" onclick="App.nav('home')">
                    <i class="fas fa-hamburger"></i> CraveBite
                </a>
                <ul class="nav-menu" id="navMenu">
                    <li class="nav-link active" onclick="App.nav('home')">Home</li>
                    <li class="nav-link" onclick="App.nav('restaurants')">Order Food</li>
                    <li class="nav-link" onclick="App.nav('about')">About</li>
                    <li class="nav-link" onclick="App.nav('tracking')">Track Order</li>
                    <li class="nav-link" onclick="App.nav('contact')">Contact</li>
                    <li class="nav-link" id="authLink" onclick="App.nav('auth')">Login</li>
                </ul>
                <div style="display:flex; align-items:center;">
                    <div class="hamburger" onclick="App.toggleMobileMenu()">
                        <i class="fas fa-bars"></i>
                    </div>
                    <div class="cart-icon-wrapper" onclick="App.toggleCart()">
                        <i class="fas fa-shopping-bag"></i>
                        <div class="cart-count" id="cartCount">0</div>
                    </div>
                </div>
            </nav>
        </div>
    </header>

    <main>
        <section id="home" class="page-section active">
            <div class="container">
                <div class="hero-grid">
                    <div class="hero-text reveal active">
                        <h1>It's not just Food, It's an <span>Experience</span>.</h1>
                        <p>Order from top restaurants in your area. Fast delivery, hot food, and the best prices guaranteed.</p>
                        <div class="search-box">
                            <input type="text" id="locationInput" placeholder="Enter your delivery location...">
                            <button class="btn btn-primary" onclick="App.searchRestaurants()">Find Food</button>
                        </div>
                        <br>
                        <div style="display: flex; gap: 15px;">
                            <button class="btn btn-secondary" onclick="App.useCurrentLocation()"><i class="fas fa-location-arrow"></i> Near Me</button>
                            <div style="display:flex; align-items:center; gap:5px;">
                                <i class="fas fa-star" style="color:var(--accent)"></i>
                                <span><strong>4.9</strong> (20k+ Reviews)</span>
                            </div>
                        </div>
                    </div>
                    <div class="hero-img reveal active">
                        <img src="istockphoto-2150383746-612x612.jpg" alt="Delicious Food"  >
                    </div>
                </div>
            </div>
            
            <div class="container section-padding">
                <div class="text-center section-title reveal">
                    <h2>How It Works</h2>
                    <p>Ordering food has never been this simple.</p>
                </div>
                <div class="steps-grid">
                    <div class="step-card reveal">
                        <div class="step-number">1</div>
                        <i class="fas fa-map-marker-alt step-icon"></i>
                        <h3>Set Location</h3>
                        <p>Enter your location to see restaurants delivering to you.</p>
                    </div>
                    <div class="step-card reveal">
                        <div class="step-number">2</div>
                        <i class="fas fa-utensils step-icon"></i>
                        <h3>Choose Food</h3>
                        <p>Browse menus and select your favorite dishes.</p>
                    </div>
                    <div class="step-card reveal">
                        <div class="step-number">3</div>
                        <i class="fas fa-motorcycle step-icon"></i>
                        <h3>Fast Delivery</h3>
                        <p>Food is prepared and delivered to your door.</p>
                    </div>
                </div>
            </div>
        </section>

        <section id="restaurants" class="page-section">
            <div class="container section-padding">
                <div class="text-center section-title reveal">
                    <h2>Top Restaurants</h2>
                    <p>Curated list of the best food spots near you.</p>
                </div>
                <div class="filters reveal">
                    <button class="filter-btn active" onclick="App.filterRest('all', this)">All</button>
                    <button class="filter-btn" onclick="App.filterRest('Fast Food', this)">Fast Food</button>
                    <button class="filter-btn" onclick="App.filterRest('Pizza', this)">Pizza</button>
                    <button class="filter-btn" onclick="App.filterRest('Asian', this)">Asian</button>
                    <button class="filter-btn" onclick="App.filterRest('Indian', this)">Indian</button>
                </div>
                <div class="restaurant-grid" id="restaurantGrid"></div>
            </div>
        </section>

        <section id="payment" class="page-section">
            <div class="container section-padding">
                <div class="text-center section-title reveal">
                    <h2>Secure Checkout</h2>
                    <p>Complete your order safely.</p>
                </div>
                <div class="payment-container reveal">
                    <div class="payment-methods">
                        <h3 style="margin-bottom:20px;">Choose Payment Method</h3>
                        <div class="method-card selected" onclick="App.selectPayment('card', this)">
                            <i class="fas fa-credit-card text-primary" style="font-size:1.5rem"></i>
                            <div>
                                <strong>Credit / Debit Card</strong>
                                <p style="font-size:0.85rem; color:#666;">Visa, Mastercard, Amex</p>
                            </div>
                        </div>
                        <div class="method-card" onclick="App.selectPayment('upi', this)">
                            <i class="fas fa-mobile-alt text-primary" style="font-size:1.5rem"></i>
                            <div>
                                <strong>UPI / Wallets</strong>
                                <p style="font-size:0.85rem; color:#666;">GooglePay, PhonePe, Paytm</p>
                            </div>
                        </div>
                        <div class="method-card" onclick="App.selectPayment('cod', this)">
                            <i class="fas fa-money-bill-wave text-primary" style="font-size:1.5rem"></i>
                            <div>
                                <strong>Cash on Delivery</strong>
                                <p style="font-size:0.85rem; color:#666;">Pay when you receive</p>
                            </div>
                        </div>
                        
                        <div id="cardDetails" style="margin-top:20px; border-top:1px solid #eee; padding-top:20px;">
                            <div class="input-group">
                                <label>Card Number</label>
                                <input type="text" placeholder="xxxx xxxx xxxx xxxx">
                            </div>
                            <div style="display:flex; gap:15px;">
                                <div class="input-group" style="flex:1">
                                    <label>Expiry</label>
                                    <input type="text" placeholder="MM/YY">
                                </div>
                                <div class="input-group" style="flex:1">
                                    <label>CVV</label>
                                    <input type="password" placeholder="***">
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="order-summary">
                        <h3 style="margin-bottom:20px;">Order Summary</h3>
                        <div id="paymentSummaryItems">
                            </div>
                        <div class="summary-total">
                            <span>Total Payable</span>
                            <span id="paymentTotal">₹0</span>
                        </div>
                        <button class="btn btn-primary btn-block" style="margin-top:20px;" onclick="App.processPayment()">Pay Now</button>
                    </div>
                </div>
            </div>
        </section>

        <section id="tracking" class="page-section">
            <div class="container section-padding">
                <div class="text-center section-title reveal">
                    <h2>Track Order</h2>
                    <p>Live updates on your delicious meal.</p>
                </div>
                
                <div id="trackingLoginMsg" class="text-center" style="display:none; padding:50px 0;">
                    <i class="fas fa-lock" style="font-size:4rem; color:#ddd; margin-bottom:20px;"></i>
                    <h3>Please Login to View Orders</h3>
                    <button class="btn btn-primary" style="margin-top:20px;" onclick="App.nav('auth')">Go to Login</button>
                </div>

                <div id="trackingContent" style="display:none;" class="reveal">
                    <div class="tracking-wrapper">
                        <div class="delivery-map">
                            <div class="map-road road-1"></div>
                            <div class="map-road road-2"></div>
                            <div class="map-road road-3"></div>
                            <div class="map-road road-4"></div>
                            <div class="map-road road-5"></div>
                            
                            <div class="map-location loc-start">
                                <i class="fas fa-map-marker-alt loc-icon"></i>
                                <div>Kitchen</div>
                            </div>
                            <div class="map-location loc-spu">
                                <i class="fas fa-home loc-icon" style="color:var(--success)"></i>
                                <div>SPU Mandi</div>
                            </div>

                            <div class="delivery-boy">
                                <i class="fas fa-motorcycle"></i>
                            </div>
                        </div>
                        <div class="track-header">
                            <h3>Order ID: <span id="trackId" class="text-primary">#ORD-0000</span></h3>
                            <p id="trackStatus">Status: <strong style="color:var(--success)">Processing</strong></p>
                        </div>
                        <div class="timeline">
                            <div class="timeline-item active">
                                <div class="timeline-icon"></div>
                                <div class="timeline-content">
                                    <h4>Order Placed</h4>
                                    <p>We have received your order.</p>
                                </div>
                            </div>
                            <div class="timeline-item">
                                <div class="timeline-icon"></div>
                                <div class="timeline-content">
                                    <h4>Preparing</h4>
                                    <p>Chef is working on your meal.</p>
                                </div>
                            </div>
                            <div class="timeline-item">
                                <div class="timeline-icon"></div>
                                <div class="timeline-content">
                                    <h4>Out for Delivery</h4>
                                    <p>Rider is on the way to SPU Mandi.</p>
                                </div>
                            </div>
                            <div class="timeline-item">
                                <div class="timeline-icon"></div>
                                <div class="timeline-content">
                                    <h4>Delivered</h4>
                                    <p>Enjoy your meal!</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div style="max-width:800px; margin: 40px auto;" class="reveal">
                        <h3>Your Order History</h3>
                        <div id="orderHistoryList"></div>
                    </div>
                </div>
            </div>
        </section>

        <section id="about" class="page-section">
            <div class="container section-padding">
                <div class="text-center section-title reveal">
                    <h2>About CraveBite</h2>
                    <p>Connecting foodies with the best flavors since 2023.</p>
                </div>

                <div class="about-grid reveal">
                    <div class="about-img">
                         <img src="https://images.unsplash.com/photo-1556910103-1c02745a30bf?w=800" alt="Our Team">
                    </div>
                    <div>
                        <h2>We are CraveBite.</h2>
                        <p style="margin-bottom:15px; color:#555;">Established in 2023, we set out to solve the problem of "What should we eat?". We connect food lovers with the passionate chefs who create culinary magic.</p>
                        
                        <div class="feature-box">
                            <i class="fas fa-medal text-primary" style="font-size:2rem;"></i>
                            <div>
                                <h4>Premium Quality</h4>
                                <p style="font-size:0.9rem; color:#777;">We conduct regular audits of our restaurant partners to ensure you get the best.</p>
                            </div>
                        </div>
                        <div class="feature-box">
                            <i class="fas fa-shipping-fast text-primary" style="font-size:2rem;"></i>
                            <div>
                                <h4>Lightning Fast</h4>
                                <p style="font-size:0.9rem; color:#777;">Our fleet of 5,000+ delivery partners ensures your food arrives hot.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="contact" class="page-section">
            <div class="container section-padding">
                <div class="text-center section-title reveal">
                    <h2>Get In Touch</h2>
                    <p>We'd love to hear from you.</p>
                </div>
                
                <div class="contact-container-custom reveal">
                    <div class="contact-info-box">
                        <h3 style="margin-bottom:25px; font-size:1.5rem;">Contact Info</h3>
                        <div style="display:flex; align-items:center; gap:15px; margin-bottom:20px;">
                            <div style="width:50px; height:50px; background:#ffe0e3; border-radius:50%; display:flex; align-items:center; justify-content:center; color:var(--primary); font-size:1.2rem;">
                                <i class="fas fa-map-marker-alt"></i>
                            </div>
                            <div>
                                <h5 style="margin-bottom:2px;">Our Location</h5>
                                <p style="color:#666; font-size:0.9rem;">SPU Mandi, Himachal Pradesh</p>
                            </div>
                        </div>
                        <div style="display:flex; align-items:center; gap:15px; margin-bottom:20px;">
                            <div style="width:50px; height:50px; background:#ffe0e3; border-radius:50%; display:flex; align-items:center; justify-content:center; color:var(--primary); font-size:1.2rem;">
                                <i class="fas fa-phone"></i>
                            </div>
                            <div>
                                <h5 style="margin-bottom:2px;">Phone Number</h5>
                                <p style="color:#666; font-size:0.9rem;">+91 9805917916</p>
                            </div>
                        </div>
                        <div style="display:flex; align-items:center; gap:15px; margin-bottom:20px;">
                            <div style="width:50px; height:50px; background:#ffe0e3; border-radius:50%; display:flex; align-items:center; justify-content:center; color:var(--primary); font-size:1.2rem;">
                                <i class="fas fa-envelope"></i>
                            </div>
                            <div>
                                <h5 style="margin-bottom:2px;">Email Address</h5>
                                <p style="color:#666; font-size:0.9rem;">support@cravebite.com</p>
                            </div>
                        </div>

                        <h4 style="margin-top:30px; margin-bottom:15px;">Frequently Asked Questions</h4>
                        <details style="margin-bottom:10px; cursor:pointer; border-bottom:1px solid #eee; padding-bottom:10px;">
                            <summary style="font-weight:600; outline:none;">How long does delivery take?</summary>
                            <p style="font-size:0.9rem; color:#666; margin-top:5px;">Usually between 30-45 minutes depending on distance.</p>
                        </details>
                        <details style="margin-bottom:10px; cursor:pointer; border-bottom:1px solid #eee; padding-bottom:10px;">
                            <summary style="font-weight:600; outline:none;">Can I cancel my order?</summary>
                            <p style="font-size:0.9rem; color:#666; margin-top:5px;">Yes, within 5 minutes of placing it.</p>
                        </details>
                    </div>

                    <div class="contact-form-box">
                        <h3 style="margin-bottom:20px;">Send Message</h3>
                        <form onsubmit="event.preventDefault(); alert('Message sent!');">
                            <div class="form-group">
                                <label>Your Name</label>
                                <input type="text" placeholder="John Doe" required>
                            </div>
                            <div class="form-group">
                                <label>Your Email</label>
                                <input type="email" placeholder="john@example.com" required>
                            </div>
                            <div class="form-group">
                                <label>Subject</label>
                                <input type="text" placeholder="Order Issue / General Inquiry">
                            </div>
                            <div class="form-group">
                                <label>Message</label>
                                <textarea rows="5" style="width:100%; padding:12px; border:1px solid #ddd; border-radius:var(--radius-md); outline:none;" placeholder="Write your message here..."></textarea>
                            </div>
                            <button class="btn btn-primary btn-block">Send Message</button>
                        </form>
                    </div>
                </div>
            </div>
        </section>

        <section id="auth" class="page-section">
            <div class="container section-padding">
                <div class="auth-wrapper reveal" id="loginForm">
                    <h2 style="color:var(--primary); margin-bottom:20px;">Welcome Back</h2>
                    <form onsubmit="event.preventDefault(); App.handleLogin()">
                        <div class="form-group"><label>Email Address</label><input type="email" id="loginEmail" required></div>
                        <div class="form-group"><label>Password</label><input type="password" id="loginPass" required></div>
                        <button class="btn btn-primary btn-block">Login</button>
                    </form>
                    <div class="auth-toggle">Don't have an account? <span onclick="App.toggleAuth()">Sign Up</span></div>
                </div>
                <div class="auth-wrapper reveal" id="signupForm" style="display:none;">
                    <h2 style="color:var(--primary); margin-bottom:20px;">Create Account</h2>
                    <form onsubmit="event.preventDefault(); App.handleSignup()">
                        <div class="form-group"><label>Full Name</label><input type="text" id="signName" required></div>
                        <div class="form-group"><label>Email Address</label><input type="email" id="signEmail" required></div>
                        <div class="form-group"><label>Password</label><input type="password" id="signPass" required></div>
                        <button class="btn btn-primary btn-block">Sign Up</button>
                    </form>
                    <div class="auth-toggle">Already have an account? <span onclick="App.toggleAuth()">Login</span></div>
                </div>
            </div>
        </section>
    </main>

    <footer>
        <div class="container">
            <div class="footer-content">
                <div>
                    <a href="#" class="footer-logo">CraveBite</a>
                    <p style="font-size:0.9rem; line-height:1.6;">The smartest way to order food. Fresh ingredients, fast delivery, and happy customers.</p>
                    <div class="social-icons">
                        <a href="#"><i class="fab fa-facebook-f"></i></a>
                        <a href="#"><i class="fab fa-twitter"></i></a>
                        <a href="#"><i class="fab fa-instagram"></i></a>
                    </div>
                </div>
                <div>
                    <h3 style="color:white; margin-bottom:20px;">Company</h3>
                    <ul class="footer-links">
                        <li><a href="#">About Us</a></li>
                        <li><a href="#">Team</a></li>
                        <li><a href="#">Careers</a></li>
                    </ul>
                </div>
                <div>
                    <h3 style="color:white; margin-bottom:20px;">Support</h3>
                    <ul class="footer-links">
                        <li><a href="#">Help & Support</a></li>
                        <li><a href="#">Partner with us</a></li>
                        <li><a href="#">Terms & Conditions</a></li>
                    </ul>
                </div>
                <div>
                    <h3 style="color:white; margin-bottom:20px;">Newsletter</h3>
                    <div style="display:flex;">
                        <input type="email" placeholder="Your Email" style="padding:10px; border:none; border-radius:5px 0 0 5px; outline:none; width:100%;">
                        <button style="padding:10px 15px; background:var(--primary); color:white; border:none; border-radius:0 5px 5px 0; cursor:pointer;"><i class="fas fa-paper-plane"></i></button>
                    </div>
                </div>
            </div>
            <div class="copyright">&copy; 2024 CraveBite Technologies Pvt Ltd. All Rights Reserved.</div>
        </div>
    </footer>

    <script>
        // =========================================
        // 1. MOCK DATABASE & LOCALSTORAGE
        // =========================================
        const DB_RESTAURANTS = [
            { id: 101, name: "Burger King", cuisine: "Fast Food", rating: 4.5, time: "30 min", price: 300, image: "https://images.unsplash.com/photo-1571091718767-18b5b1457add?w=500", menu: [ { id: 1, name: "Whopper Burger", price: 199, desc: "Flame grilled patty with veggies" }, { id: 2, name: "Chicken Fries", price: 129, desc: "Crispy chicken strips" }, { id: 3, name: "Coke (Large)", price: 80, desc: "Chilled soft drink" } ] },
            { id: 102, name: "Pizza Hut", cuisine: "Pizza", rating: 4.2, time: "40 min", price: 500, image: "https://images.unsplash.com/photo-1513104890138-7c749659a591?w=500", menu: [ { id: 4, name: "Pepperoni Feast", price: 499, desc: "Loaded with pepperoni and cheese" }, { id: 5, name: "Veggie Supreme", price: 399, desc: "Onions, capsicum, mushroom" }, { id: 6, name: "Garlic Bread", price: 149, desc: "Buttery garlic sticks" } ] },
            { id: 103, name: "Sushi World", cuisine: "Asian", rating: 4.8, time: "50 min", price: 800, image: "https://images.unsplash.com/photo-1579871494447-9811cf80d66c?w=500", menu: [ { id: 7, name: "Salmon Roll", price: 350, desc: "Fresh salmon sushi roll" }, { id: 8, name: "Tuna Sashimi", price: 450, desc: "Raw tuna slices" }, { id: 9, name: "Miso Soup", price: 150, desc: "Traditional soybean soup" } ] },
            { id: 104, name: "Taco Bell", cuisine: "Fast Food", rating: 4.1, time: "25 min", price: 250, image: "https://images.unsplash.com/photo-1565299585323-38d6b0865b47?w=500", menu: [ { id: 10, name: "Crunchy Taco", price: 99, desc: "Hard shell beef taco" }, { id: 11, name: "Burrito Bowl", price: 249, desc: "Rice, beans and chicken" }, { id: 12, name: "Nachos Supreme", price: 199, desc: "Chips with cheese sauce" } ] },
            { id: 105, name: "Spice Route", cuisine: "Indian", rating: 4.6, time: "35 min", price: 400, image: "https://images.unsplash.com/photo-1565299585323-38d6b0865b47?w=500", menu: [ { id: 13, name: "Butter Chicken", price: 320, desc: "Creamy tomato curry" }, { id: 14, name: "Naan Bread", price: 40, desc: "Tandoori baked bread" }, { id: 15, name: "Biryani", price: 280, desc: "Aromatic spiced rice" } ] },
            { id: 106, name: "Green Salad Bar", cuisine: "Healthy", rating: 4.3, time: "20 min", price: 300, image: "https://images.unsplash.com/photo-1512621776951-a57141f2eefd?w=500", menu: [ { id: 16, name: "Caesar Salad", price: 220, desc: "Lettuce, croutons, parmesan" }, { id: 17, name: "Greek Salad", price: 240, desc: "Feta cheese, olives, cucumber" } ] }
        ];

        const UserDB = {
            getUsers: () => JSON.parse(localStorage.getItem('cb_users')) || [],
            saveUser: (user) => {
                const users = UserDB.getUsers();
                users.push(user);
                localStorage.setItem('cb_users', JSON.stringify(users));
            },
            getCurrentUser: () => JSON.parse(localStorage.getItem('cb_current_user')),
            loginUser: (user) => localStorage.setItem('cb_current_user', JSON.stringify(user)),
            logoutUser: () => localStorage.removeItem('cb_current_user'),
            addOrderToUser: (email, order) => {
                const users = UserDB.getUsers();
                const userIndex = users.findIndex(u => u.email === email);
                if(userIndex > -1) {
                    if(!users[userIndex].orders) users[userIndex].orders = [];
                    users[userIndex].orders.unshift(order);
                    localStorage.setItem('cb_users', JSON.stringify(users));
                    let currentUser = UserDB.getCurrentUser();
                    if(currentUser && currentUser.email === email) {
                        if(!currentUser.orders) currentUser.orders = [];
                        currentUser.orders.unshift(order);
                        UserDB.loginUser(currentUser);
                    }
                }
            }
        };

        // =========================================
        // 2. CART LOGIC CLASS
        // =========================================
        class ShoppingCart {
            constructor() { this.items = []; this.total = 0; }
            addItem(id, name, price) {
                const existing = this.items.find(i => i.id === id);
                if (existing) existing.qty++; else this.items.push({ id, name, price, qty: 1 });
                this.updateUI();
                App.showToast(`${name} added to cart`);
            }
            removeItem(id) {
                const index = this.items.findIndex(i => i.id === id);
                if (index > -1) {
                    if (this.items[index].qty > 1) this.items[index].qty--; else this.items.splice(index, 1);
                }
                this.updateUI();
            }
            updateUI() {
                this.total = this.items.reduce((acc, curr) => acc + (curr.price * curr.qty), 0);
                document.getElementById('cartCount').innerText = this.items.reduce((acc, curr) => acc + curr.qty, 0);
                document.getElementById('cartTotalAmount').innerText = '₹' + this.total;
                document.getElementById('paymentTotal').innerText = '₹' + this.total;

                const container = document.getElementById('cartItemsContainer');
                const paymentSummary = document.getElementById('paymentSummaryItems');
                
                container.innerHTML = ''; paymentSummary.innerHTML = '';

                if (this.items.length === 0) {
                    container.innerHTML = '<p class="text-center" style="margin-top:50px; color:#999">Your cart is empty.</p>';
                    return;
                }

                this.items.forEach(item => {
                    container.innerHTML += `
                        <div class="cart-item">
                            <div><h5>${item.name}</h5><span class="cart-item-price">₹${item.price}</span></div>
                            <div class="qty-controls">
                                <button class="qty-btn" onclick="Cart.removeItem(${item.id})">-</button>
                                <span>${item.qty}</span>
                                <button class="qty-btn" onclick="Cart.addItem(${item.id}, '${item.name}', ${item.price})">+</button>
                            </div>
                        </div>`;
                    paymentSummary.innerHTML += `
                        <div style="display:flex; justify-content:space-between; margin-bottom:10px; color:#555;">
                            <span>${item.name} x${item.qty}</span><span>₹${item.price * item.qty}</span>
                        </div>`;
                });
            }
            proceedToPayment() {
                if (this.items.length === 0) return alert("Cart is empty!");
                if (!UserDB.getCurrentUser()) { alert("Please login to proceed."); App.nav('auth'); return; }
                App.nav('payment'); App.toggleCart();
            }
        }
        const Cart = new ShoppingCart();

        // =========================================
        // 3. MAIN APP LOGIC
        // =========================================
        const App = {
            init: function() {
                this.renderRestaurants(DB_RESTAURANTS);
                this.addScrollAnimation();
                this.checkAuthStatus();
            },
            checkAuthStatus: function() {
                const user = UserDB.getCurrentUser();
                const authLink = document.getElementById('authLink');
                if(user) {
                    authLink.innerText = "My Account (" + user.name.split(' ')[0] + ")";
                    authLink.onclick = () => App.nav('tracking');
                } else {
                    authLink.innerText = "Login";
                    authLink.onclick = () => App.nav('auth');
                }
            },
            nav: function(pageId) {
                document.querySelectorAll('.nav-link').forEach(l => l.classList.remove('active'));
                const linkMap = {'home':0, 'restaurants':1, 'about':2, 'tracking':3, 'contact':4, 'auth':5};
                const links = document.querySelectorAll('.nav-link');
                if(links[linkMap[pageId]]) links[linkMap[pageId]].classList.add('active');

                document.querySelectorAll('.page-section').forEach(s => s.classList.remove('active'));
                document.getElementById(pageId).classList.add('active');
                document.querySelector('.nav-menu').classList.remove('active');
                window.scrollTo(0,0);
                if(pageId === 'tracking') this.loadTrackingPage();
            },
            toggleMobileMenu: function() { document.querySelector('.nav-menu').classList.toggle('active'); },
            toggleAuth: function() {
                const login = document.getElementById('loginForm');
                const signup = document.getElementById('signupForm');
                if (login.style.display === 'none') { login.style.display = 'block'; signup.style.display = 'none'; } 
                else { login.style.display = 'none'; signup.style.display = 'block'; }
            },
            handleSignup: function() {
                const name = document.getElementById('signName').value;
                const email = document.getElementById('signEmail').value;
                const pass = document.getElementById('signPass').value;
                if(UserDB.getUsers().find(u => u.email === email)) return alert("User already exists!");
                UserDB.saveUser({ name, email, pass, orders: [] });
                alert("Account created! Please Login.");
                this.toggleAuth();
            },
            handleLogin: function() {
                const email = document.getElementById('loginEmail').value;
                const pass = document.getElementById('loginPass').value;
                const user = UserDB.getUsers().find(u => u.email === email && u.pass === pass);
                if(user) { UserDB.loginUser(user); alert("Welcome back, " + user.name + "!"); this.checkAuthStatus(); this.nav('restaurants'); } 
                else { alert("Invalid email or password."); }
            },
            renderRestaurants: function(data) {
                const grid = document.getElementById('restaurantGrid');
                grid.innerHTML = '';
                data.forEach(rest => {
                    grid.innerHTML += `
                        <div class="res-card reveal">
                            <div class="res-img">
                                <img src="${rest.image}" alt="${rest.name}">
                                <span class="badge">${rest.rating} <i class="fas fa-star"></i></span>
                            </div>
                            <div class="res-info">
                                <h3 class="res-name">${rest.name}</h3>
                                <div class="res-meta"><span>${rest.cuisine}</span><span>•</span><span>${rest.time}</span></div>
                                <div class="res-footer">
                                    <span style="font-weight:bold; color:var(--primary)">₹${rest.price} for two</span>
                                    <button class="btn btn-secondary" style="padding:5px 15px; font-size:0.9rem;" onclick="App.openMenu(${rest.id})">View Menu</button>
                                </div>
                            </div>
                        </div>`;
                });
                this.addScrollAnimation(); // Re-trigger for new items
            },
            filterRest: function(category, btn) {
                document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                const filtered = category === 'all' ? DB_RESTAURANTS : DB_RESTAURANTS.filter(r => r.cuisine.includes(category));
                this.renderRestaurants(filtered);
            },
            searchRestaurants: function() {
                const loc = document.getElementById('locationInput').value;
                if(!loc) return alert("Please enter a location");
                this.nav('restaurants');
                document.getElementById('restaurantGrid').innerHTML = '<div style="grid-column:1/-1; text-align:center; padding:50px;">Searching in ' + loc + '... <i class="fas fa-spinner fa-spin"></i></div>';
                setTimeout(() => this.renderRestaurants(DB_RESTAURANTS), 1000);
            },
            useCurrentLocation: function() {
                if (navigator.geolocation) { alert("Fetching location... (Simulated)"); document.getElementById('locationInput').value = "SPU Mandi"; this.searchRestaurants(); } 
                else alert("Geolocation not supported");
            },
            openMenu: function(restId) {
                const rest = DB_RESTAURANTS.find(r => r.id === restId);
                document.getElementById('modalRestName').innerText = rest.name;
                const menuContainer = document.getElementById('menuListContainer');
                menuContainer.innerHTML = '';
                rest.menu.forEach(item => {
                    menuContainer.innerHTML += `
                        <div class="menu-item">
                            <div class="menu-info"><h4>${item.name}</h4><p>${item.desc}</p><div class="menu-price">₹${item.price}</div></div>
                            <button class="btn-add" onclick="Cart.addItem(${item.id}, '${item.name}', ${item.price})">ADD</button>
                        </div>`;
                });
                document.getElementById('menuModal').classList.add('open');
            },
            closeMenu: function() { document.getElementById('menuModal').classList.remove('open'); },
            toggleCart: function() { document.getElementById('cartSidebar').classList.toggle('open'); },
            showToast: function(msg) {
                const div = document.createElement('div');
                div.style.cssText = 'position:fixed; bottom:20px; left:50%; transform:translateX(-50%); background:rgba(0,0,0,0.8); color:white; padding:10px 20px; border-radius:30px; z-index:5000; animation:fadeIn 0.3s;';
                div.innerText = msg;
                document.body.appendChild(div);
                setTimeout(() => div.remove(), 2000);
            },
            selectPayment: function(method, el) {
                document.querySelectorAll('.method-card').forEach(c => c.classList.remove('selected'));
                el.classList.add('selected');
                document.getElementById('cardDetails').style.display = method === 'card' ? 'block' : 'none';
            },
            processPayment: function() {
                const btn = document.querySelector('#payment .btn-primary');
                const originalText = btn.innerText;
                btn.innerText = "Processing..."; btn.disabled = true;
                setTimeout(() => {
                    const orderId = 'ORD-' + Math.floor(Math.random() * 1000000);
                    const newOrder = { id: orderId, date: new Date().toLocaleDateString(), total: Cart.total, status: 'Processing' };
                    UserDB.addOrderToUser(UserDB.getCurrentUser().email, newOrder);
                    Cart.items = []; Cart.updateUI();
                    btn.innerText = originalText; btn.disabled = false;
                    alert("Payment Successful! Order ID: " + orderId);
                    this.nav('tracking');
                }, 2000);
            },
            loadTrackingPage: function() {
                const user = UserDB.getCurrentUser();
                const content = document.getElementById('trackingContent');
                const msg = document.getElementById('trackingLoginMsg');
                if(!user) { content.style.display = 'none'; msg.style.display = 'block'; return; }
                content.style.display = 'block'; msg.style.display = 'none';
                
                const list = document.getElementById('orderHistoryList');
                list.innerHTML = '';
                if(!user.orders || user.orders.length === 0) list.innerHTML = '<p>No orders found.</p>';
                else {
                    const latest = user.orders[0];
                    document.getElementById('trackId').innerText = "#" + latest.id;
                    user.orders.forEach(order => {
                        list.innerHTML += `<div style="padding:15px; border:1px solid #eee; margin-bottom:10px; border-radius:8px; display:flex; justify-content:space-between; align-items:center;"><div><strong>#${order.id}</strong><br><span style="font-size:0.85rem; color:#888;">${order.date}</span></div><div style="font-weight:bold;">₹${order.total} <span style="font-size:0.85rem; color:var(--success)">${order.status}</span></div></div>`;
                    });
                }
            },
            addScrollAnimation: function() {
                const observer = new IntersectionObserver((entries) => {
                    entries.forEach(entry => { if(entry.isIntersecting) entry.target.classList.add('active'); });
                });
                document.querySelectorAll('.reveal').forEach(el => observer.observe(el));
            }
        };

        window.addEventListener('DOMContentLoaded', () => App.init());
    </script>
</body>
</html>